 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACETRANSFERAPI=(function(){function ka(b){var d=new XMLHttpRequest;d.open("GET",a.Va+a.save,!0);d.withCredentials=!1;d.onreadystatechange=function(){4===d.readyState&&200===d.status&&b(d.responseText)};d.send()}function wa(){for(var b=a.Ab,d=Array(b),e=0;e<b;++e)d[e]=0;return d}function ya(b,d,e){b=Math.min(Math.max((e-b)/(d-b),0),1);return b*b*(3-2*b)}function za(b,d,e){return Math.min(Math.max((e-b)/(d-b),0),1)}function Ba(b,d,e,h){return Math.pow(Math.min(Math.max((h-b)/(d-b),0),1),e)}
function Da(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Fa(b,d){var e=d%8;return b[(d-e)/8]>>7-e&1}
function Ga(b){var d=JSON.parse(b);b=d.ne;var e=d.nf,h=d.n,k="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data),l=k.length,p;d=new Uint8Array(l);for(p=0;p<l;++p)d[p]=k.charCodeAt(p);k=new Float32Array(h);l=new Float32Array(e);p=b+e+1;var m,n;for(m=0;m<h;++m){var g=p*m;var t=0===Fa(d,g)?1:-1;var u=g+1;var z=1,H=0;for(n=u+b-1;n>=u;--n)H+=z*Fa(d,n),z*=2;n=H;u=d;z=g+1+b;H=l;var D=0,L=H.length;for(g=z;g<z+L;++g)H[D]=Fa(u,g),++D;for(g=u=0;g<e;++g)u+=l[g]*Math.pow(2,-g-
1);t=0===u&&0===n?0:t*(1+u)*Math.pow(2,1+n-Math.pow(2,b-1));k[m]=t}return k}
var v=function(){function b(f,w){f=r.createShader(f);r.shaderSource(f,w);r.compileShader(f);return r.getShaderParameter(f,r.COMPILE_STATUS)?f:!1}function d(f,w){f=b(r.VERTEX_SHADER,f);w=b(r.FRAGMENT_SHADER,w);var y=r.createProgram();r.attachShader(y,f);r.attachShader(y,w);r.linkProgram(y);return y}function e(f){void 0===f.ca&&(f.ca="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===f.fa&&(f.fa=["a0"]);void 0===f.W&&(f.W=
[2]);if(void 0===f.precision||"highp"===f.precision)f.precision=n;f.id=p++;void 0!==f.bd&&f.bd.forEach(function(y,da){f.c=f.c.replace(y,f.sa[da])});f.Ua=0;f.W.forEach(function(y){f.Ua+=4*y});f.ra=d(f.ca,"precision "+f.precision+" float;\n"+f.c);f.l={};f.f.forEach(function(y){f.l[y]=r.getUniformLocation(f.ra,y)});f.attributes={};f.X=[];f.fa.forEach(function(y){var da=r.getAttribLocation(f.ra,y);f.attributes[y]=da;f.X.push(da)});if(f.h){r.useProgram(f.ra);l=f;k=f.id;for(var w in f.h)r.uniform1i(f.l[w],
f.h[w])}f.Sd=!0}function h(f){Ha.hd(N);k!==f.id&&(N.U(),k=f.id,l=f,r.useProgram(f.ra),f.X.forEach(function(w){0!==w&&r.enableVertexAttribArray(w)}))}var k=-1,l=!1,p=0,m=!1,n="highp",g=["u1"],t=["u0"],u={u1:0},z={u0:0},H={u1:0,u2:1},D={u3:0},L={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:g,h:u},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:g,h:u,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],h:H},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:g,h:u},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:H},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:g,h:u},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:g,h:u},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:z},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:z},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:g,h:u},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:u},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:u},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:t,h:z},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:t,h:z},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:t,h:z},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:t,h:z},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:t,h:z},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:t,h:z},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:z},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:u},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:g,h:u,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],h:u,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],h:u,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],h:H},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],h:H},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:D},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:D},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:u,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:u,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],h:{u1:0,u30:1,u31:2}}},P={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],sa:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),sa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},N={La:function(){return m},i:function(){if(!m){n="highp";for(var f in L)e(L[f],f);v.set("s0");r.enableVertexAttribArray(0);f=Ia.i();m=!0;return f}},Ub:function(f){f.forEach(function(w){N.Za(w)})},Za:function(f){L[f.id]=f;e(f,f.id)},ob:function(f,w,y){w||(w=f);L[w]=Object.create(P[f]);P[f].sa&&P[f].sa.forEach(function(da,qa){L[w].c=L[w].c.replace(new RegExp(da,"g"),y[qa])});e(L[w],w)},set:function(f){h(L[f])},
rc:function(f){return"undefined"!==typeof L[f]},Ed:function(){return l.Bd},U:function(){-1!==k&&(k=-1,l.X.forEach(function(f){0!==f&&r.disableVertexAttribArray(f)}))},Ra:function(){var f=0;l.X.forEach(function(w,y){y=l.W[y];r.vertexAttribPointer(w,y,r.FLOAT,!1,l.Ua,f);f+=4*y})},Ad:function(){r.enableVertexAttribArray(0)},Sa:function(){r.vertexAttribPointer(l.X[0],2,r.FLOAT,!1,8,0)},de:function(f,w){r.uniform1i(l.l[f],w)},A:function(f,w){r.uniform1f(l.l[f],w)},I:function(f,w,y){r.uniform2f(l.l[f],
w,y)},ee:function(f,w){r.uniform2fv(l.l[f],w)},fe:function(f,w){r.uniform3fv(l.l[f],w)},Kb:function(f,w,y,da){r.uniform3f(l.l[f],w,y,da)},Lb:function(f,w){r.uniform4fv(l.l[f],w)},ge:function(f,w){r.uniformMatrix2fv(l.l[f],!1,w)},he:function(f,w){r.uniformMatrix3fv(l.l[f],!1,w)},ie:function(f,w){r.uniformMatrix4fv(l.l[f],!1,w)},C:function(f,w){N.set(f);w.forEach(function(y){switch(y.type){case "4f":r.uniform4fv(l.l[y.name],y.value);break;case "3f":r.uniform3fv(l.l[y.name],y.value);break;case "2f":r.uniform2fv(l.l[y.name],
y.value);break;case "1f":r.uniform1f(l.l[y.name],y.value);break;case "1i":r.uniform1i(l.l[y.name],y.value);break;case "mat2":r.uniformMatrix2fv(l.l[y.name],!1,y.value);break;case "mat3":r.uniformMatrix3fv(l.l[y.name],!1,y.value);break;case "mat4":r.uniformMatrix4fv(l.l[y.name],!1,y.value)}})},Ld:function(){return"lowp"}};return N}(),r=!1,Ka=function(){function b(g){console.log("ERROR in ContextFeedForward : ",g);return!1}function d(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var g=
navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g=[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3]||0,10)];return 12===g[0]||13===g[0]?!0:!1}return/(Mac)/i.test(navigator.platform)&&((g=navigator.userAgent)?(g=g.match(/Mac OS X (\d+)_(\d+)/)||g.match(/Mac OS X (\d+).(\d+)/),g=!g||3>g.length?!1:[parseInt(g[1],10),parseInt(g[2],10)]):g=!1,g&&10===g[0]&&15===g[1])?!0:!1}var e=!1,h=!1,k=!1,l=!1,p=!0,m=!1,n={o:function(){return e.width},F:function(){return e.height},ka:function(){return e},Dd:function(){return r},
m:function(){return p},flush:function(){r.flush()},vc:function(){m||(m=new Uint8Array(e.width*e.height*4));r.readPixels(0,0,e.width,e.height,r.RGBA,r.UNSIGNED_BYTE,m);return m},Gd:function(){return e.toDataURL("image/jpeg")},Hd:function(){F.D();h||(h=document.createElement("canvas"),k=h.getContext("2d"));h.width=e.width;h.height=e.height;var g=n.vc(),t=k.createImageData(h.width,h.height),u,z,H=h.width,D=h.height,L=t.data;for(z=0;z<D;++z){var P=D-z-1;for(u=0;u<H;++u){var N=4*(z*H+u);var f=4*(P*H+u);
L[N]=g[f];L[N+1]=g[f+1];L[N+2]=g[f+2];L[N+3]=g[f+3]}}k.putImageData(t,0,0);return h.toDataURL("image/png")},Fd:function(g){!h&&g&&(h=document.createElement("canvas"),k=h.getContext("2d"));var t=g?h:document.createElement("canvas");t.width=e.width;t.height=e.height;(g?k:t.getContext("2d")).drawImage(e,0,0);return t},i:function(g){g.hb&&!g.ia?e=document.getElementById(g.hb):g.ia&&(e=g.ia);e||(e=document.createElement("canvas"));e.width=g&&void 0!==g.width?g.width:512;e.height=g&&void 0!==g.height?g.height:
512;"undefined"===typeof g&&(g={});void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!1);void 0===g.Ka&&(g.Ka=!0);void 0===g.antialias&&(g.antialias=!1);var t={antialias:g.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:g.premultipliedAlpha,stencil:!1,depth:g.Ka};d()||(r=e.getContext("webgl2",t));r?p=!0:((r=e.getContext("webgl",t))||(r=e.getContext("experimental-webgl",t)),p=!1);if(!r)return b("WebGL is not enabled");(l=r.getExtension("WEBGL_lose_context"))&&e.addEventListener("webglcontextlost",
g.Wc,!1);if(!Ja.i())return b("Not enough capabilities");if(!Ja.cc()&&p)return b("Your configuration cannot process color buffer float");r.clearColor(0,0,0,0);r.disable(r.DEPTH_TEST);r.disable(r.BLEND);r.disable(r.DITHER);r.disable(r.STENCIL_TEST);r.GENERATE_MIPMAP_HINT&&r.hint(r.GENERATE_MIPMAP_HINT,r.FASTEST);r.disable(r.SAMPLE_ALPHA_TO_COVERAGE);r.disable(r.SAMPLE_COVERAGE);return!0},Rd:function(){if(!v.i())return!1;r.depthFunc(r.LEQUAL);r.clearDepth(1);return!0}};return n}(),Ha=function(){var b=
"undefined"===typeof v?JEShaders:v;return{hd:function(d){b!==d&&(b.U(),b=d)},La:function(){return b.La()},Sa:function(){b.Sa()},Ra:function(){b.Ra()},U:function(){b.U()},set:function(d){b.set(d)}}}(),I=function(){var b,d,e=0,h=-2,k=-2,l=!1,p={reset:function(){k=h=-2},i:function(){l||(b=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,b),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),r.STATIC_DRAW),d=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,d),r.bufferData(r.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),r.STATIC_DRAW),p.Ba(),l=!0)},a:function(m){var n=e++,g=m.L?m.L.length:0,t="undefined"===typeof m.mode?r.STATIC_DRAW:m.mode,u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u);r.bufferData(r.ARRAY_BUFFER,m.Qb instanceof Float32Array?m.Qb:new Float32Array(m.Qb),t);h=n;if(m.L){var z=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,z);if(65536>m.L.length){var H=Uint16Array;var D=r.UNSIGNED_SHORT;var L=2}else H=Uint32Array,D=r.UNSIGNED_INT,L=4;r.bufferData(r.ELEMENT_ARRAY_BUFFER,
m.L instanceof H?m.L:new H(m.L),t);k=n}var P={bc:function(N){h!==n&&(r.bindBuffer(r.ARRAY_BUFFER,u),h=n);N&&Ha.Ra()},$b:function(){k!==n&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,z),k=n)},bind:function(N){P.bc(N);P.$b()},yd:function(){r.drawElements(r.TRIANGLES,g,D,0)},zd:function(N,f){r.drawElements(r.TRIANGLES,N,D,f*L)},remove:function(){r.deleteBuffer(u);m.L&&r.deleteBuffer(z);P=null}};return P},Ba:function(){-1!==h&&(r.bindBuffer(r.ARRAY_BUFFER,b),h=-1);-1!==k&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,
d),k=-1)},g:function(m,n){m&&I.Ba();n&&Ha.Sa();r.drawElements(r.TRIANGLES,3,r.UNSIGNED_SHORT,0)},uc:function(){r.deleteBuffer(b);r.deleteBuffer(d)}};return p}(),F=function(){var b,d,e,h=!1,k={s:-2,sc:1};return{i:function(){if(!h){b=r.createFramebuffer();var l=Ja.m();d=l&&r.DRAW_FRAMEBUFFER?r.DRAW_FRAMEBUFFER:r.FRAMEBUFFER;e=l&&r.READ_FRAMEBUFFER?r.READ_FRAMEBUFFER:r.FRAMEBUFFER;h=!0}},Jd:function(){return d},Ga:function(){return e},R:function(){return r.FRAMEBUFFER},Md:function(){return k},Cd:function(){return b},
a:function(l){void 0===l.qb&&(l.qb=!1);var p=l.ba?l.ba:!1,m=l.width,n=void 0!==l.height?l.height:l.width,g=b,t=!1,u=!1,z=0;p&&(m=m?m:p.o(),n=n?n:p.F());var H={Ib:function(){u||(g=r.createFramebuffer(),u=!0,z=k.sc++)},Tb:function(){H.Ib();H.j();t=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,t);r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,m,n);r.framebufferRenderbuffer(d,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,t);r.clearDepth(1)},bind:function(D,L){z!==k.s&&(r.bindFramebuffer(d,g),
k.s=z);p&&p.j();L&&r.viewport(0,0,m,n);D&&r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},sd:function(){z!==k.s&&(r.bindFramebuffer(d,g),k.s=z)},clear:function(){r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},vd:function(){r.clear(r.COLOR_BUFFER_BIT)},wd:function(){r.clear(r.DEPTH_BUFFER_BIT)},jd:function(){r.viewport(0,0,m,n)},j:function(){z!==k.s&&(r.bindFramebuffer(d,g),k.s=z)},rtt:function(D){p=D;k.s!==z&&(r.bindFramebuffer(r.FRAMEBUFFER,g),k.s=z);D.j()},D:function(){r.bindFramebuffer(d,null);
k.s=-1},resize:function(D,L){m=D;n=L;t&&(r.bindRenderbuffer(r.RENDERBUFFER,t),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,m,n))},remove:function(){r.bindFramebuffer(d,g);r.framebufferTexture2D(d,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0);t&&r.framebufferRenderbuffer(d,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,null);r.bindFramebuffer(d,null);r.deleteFramebuffer(g);t&&r.deleteRenderbuffer(t);H=null}};l.qb&&H.Tb();return H},D:function(){r.bindFramebuffer(d,null);k.s=-1},od:function(){r.bindFramebuffer(d,
null);r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);r.viewport(0,0,Ja.o(),Ja.F());k.s=-1},reset:function(){k.s=-2},H:function(){0!==k.s&&(r.bindFramebuffer(d,b),k.s=0)},clear:function(){r.viewport(0,0,Ja.o(),Ja.F());r.clear(r.COLOR_BUFFER_BIT)}}}(),K=function(){function b(c){r.bindTexture(r.TEXTURE_2D,c)}function d(c){qa[0]=c;c=ta[0];var A=c>>16&32768,J=c>>12&2047,O=c>>23&255;return 103>O?A:142<O?A|31744|((255==O?0:1)&&c&8388607):113>O?(J|=2048,A|(J>>114-O)+(J>>113-O&1)):A=(A|O-112<<10|J>>1)+(J&
1)}function e(c){var A=new Uint16Array(c.length);c.forEach(function(J,O){A[O]=d(J)});return A}function h(){if(null!==na.Ha)return na.Ha;var c=l(e([1,1,1,1]));return null===c?!0:na.Ha=c}function k(){if(null!==na.Ia)return na.Ia;var c=l(new Uint8Array([255,255,255,255]));return null===c?!0:na.Ia=c}function l(c){if(!Ha.La()||!D)return null;try{var A=r.getError(),J=W.a({isFloat:!1,B:!0,array:c,width:1});A=r.getError();if(A!==r.NO_ERROR)return!1}catch(O){return!1}F.D();r.viewport(0,0,1,1);r.clearColor(0,
0,0,0);r.clear(r.COLOR_BUFFER_BIT);Ha.set("s0");J.cb(0);I.g(!1,!0);c=new Uint8Array(4);r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,c);c=.9<c[0];J.remove();F.H();return c}var p=0,m,n=0,g,t=!1,u,z,H,D=!1,L=!1,P,N,f,w=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],y=!1,da=!1,qa=new Float32Array(1),ta=new Int32Array(qa.buffer),na={Ha:null,Ia:null},W={i:function(){if(!D){z=[r.RGB,!1,r.RGB,r.RGBA];H=[r.RGB,!1,r.RGB,r.RGBA];m=[r.TEXTURE0,r.TEXTURE1,r.TEXTURE2,r.TEXTURE3,r.TEXTURE4,r.TEXTURE5,r.TEXTURE6,r.TEXTURE7];
y="undefined"!==typeof JEContext;da="undefined"!==typeof Ja;y&&JEContext.Yd()&&m.push(r.TEXTURE8,r.TEXTURE9);g=[-1,-1,-1,-1,-1,-1,-1,-1];u=[r.UNSIGNED_BYTE,r.FLOAT,r.FLOAT];if(!t){for(var c=new Float32Array(16384),A=0;16384>A;++A)c[A]=2*Math.random()-1;t={random:W.a({isFloat:!0,isPot:!0,array:c,width:64}),Pb:W.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}D=!0}},Fc:function(){W.pd()},Pd:function(){return t.Pb},pd:function(){u[1]=Ja.la()},dd:function(){H=z=[r.RGBA,r.RGBA,r.RGBA,
r.RGBA]},Zc:function(c,A){v.set("s1");F.D();var J=c.o(),O=c.F();r.viewport(0,0,J,O);c.b(0);I.g(!1,!1);r.readPixels(0,0,J,O,r.RGBA,r.UNSIGNED_BYTE,A)},tc:function(c,A,J){r.activeTexture(r.TEXTURE0);p=0;var O=r.createTexture();b(O);var X=Ja.m()&&r.RGBA32F?r.RGBA32F:r.FLOAT;A=A instanceof Float32Array?A:new Float32Array(A);var aa=Math.log2(A.length);aa!==Math.floor(aa)&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE));r.texParameteri(r.TEXTURE_2D,
r.TEXTURE_MAG_FILTER,r.NEAREST);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,J);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,c.o(),c.F(),0,r.RGBA,X,A);b(null);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);F.H();v.set("s0");c.u();r.clearColor(0,0,0,0);r.clear(r.COLOR_BUFFER_BIT);b(O);I.g(!0,!1);r.deleteTexture(O)},a:function(c){function A(){b(ea);ra&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,ra);c.isPot?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,c.sb?r.MIRRORED_REPEAT:
r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,c.M?r.MIRRORED_REPEAT:r.REPEAT)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE));c.oa&&"undefined"!==typeof JESETTINGS&&r.texParameterf(r.TEXTURE_2D,JEContext.Id().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.rd);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,c.isLinear?r.LINEAR:r.NEAREST);c.isLinear?r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,c.isMipmap&&!xa?r.NEAREST_MIPMAP_LINEAR:
r.LINEAR):r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,c.isMipmap&&!xa?r.NEAREST_MIPMAP_NEAREST:r.NEAREST);la=z[c.aa-1];fa=H[c.aa-1];ma=u[J];if(Ja.m()){var q=r.RGBA32F;la===r.RGBA&&ma===r.FLOAT&&q&&(fa=q);la===r.RGB&&ma===r.FLOAT&&q&&(fa=q,la=r.RGBA)}if(c.B&&!c.isFloat||c.isFloat&&c.isMipmap&&Ia.Ic())(q=r.RGBA16F)&&(fa=q),ma=Ja.la();c.vb&&"undefined"!==typeof r.texStorage2D&&(E=c.vb);c.tb&&4===c.aa&&(la=JEContext.Nd());if(c.v)r.texImage2D(r.TEXTURE_2D,0,fa,la,ma,c.v);else if(c.url)r.texImage2D(r.TEXTURE_2D,
0,fa,la,ma,oa);else if(U){try{r.getError(),r.texImage2D(r.TEXTURE_2D,0,fa,M,x,0,la,ma,U),r.getError()!==r.NO_ERROR&&(r.texImage2D(r.TEXTURE_2D,0,fa,M,x,0,la,ma,null),r.getError()!==r.NO_ERROR&&r.texImage2D(r.TEXTURE_2D,0,r.RGBA,M,x,0,r.RGBA,r.UNSIGNED_BYTE,null))}catch(ha){r.texImage2D(r.TEXTURE_2D,0,fa,M,x,0,la,ma,null)}c.isKeepArray||(U=null)}else r.texImage2D(r.TEXTURE_2D,0,fa,M,x,0,la,ma,null);if(c.isMipmap)if(!xa&&B)B.Fa(),Y=!0;else if(xa){q=Math.log(Math.min(M,x))/Math.log(2);var C;pa=Array(1+
q);pa[0]=ea;for(C=1;C<=q;++C){var G=Math.pow(2,C);var R=M/G;G=x/G;var Z=r.createTexture();b(Z);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);r.texImage2D(r.TEXTURE_2D,0,fa,R,G,0,la,ma,null);b(null);pa[C]=Z}Y=!0}b(null);g[p]=-1;ra&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);S=!0;ba&&B&&(ba(B),ba=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.B&&(c.B=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===
typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.Ca&&(c.Ca=!1);void 0===c.oa&&(c.oa=!1);void 0===c.M&&(c.M=!1);void 0===c.sb&&(c.sb=!1);void 0===c.tb&&(c.tb=!1);void 0===c.aa&&(c.aa=4);void 0===c.rb&&(c.rb=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?Ga(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=
!1);var J=0,O=c.v?!0:!1,X=null,aa=null,ca=!1,sa=null;c.isFloat&&(c.B=!0);c.B&&(J=1);c.rb||Ja.m()||!c.isFloat||!da||Ja.fb()||(c.isFloat=!1);c.isFloat&&(J=2);c.oa&&y&&!JEContext.Td()&&(c.oa=!1);var ea=r.createTexture(),ba=c.Ca,oa=null,U=!1,M=0,x=0,S=!1,T=n++,Q=!1,ia,ua,Ca,Aa,fa,la,ma,ra=c.isFlipY,xa=c.B&&c.isMipmap&&"undefined"!==typeof Ia&&!Ia.ec()?!0:!1,pa,E=-1,Y=!1;"undefined"!==typeof c.width&&c.width&&(M=c.width,x="undefined"!==typeof c.height&&c.height?c.height:M);var B={get:function(){return ea},
o:function(){return M},F:function(){return x},Qd:function(){return c.url},Ud:function(){return c.isFloat},Wd:function(){return c.B},Xd:function(){return c.isLinear},Fa:function(){r.generateMipmap(r.TEXTURE_2D)},eb:function(q,C){xa?(q||(q=B.kb()),B.Aa(C),b(pa[q]),g[C]=-1):B.b(C)},kb:function(){-1===E&&(E=Math.log(M)/Math.log(2));return E},jb:function(q){if(xa){q||(q=B.kb());v.set("s11");B.Aa(0);var C,G=M,R=x;for(C=1;C<=q;++C)G/=2,R/=2,v.I("u7",.25/G,.25/R),r.viewport(0,0,G,R),b(pa[C-1]),r.framebufferTexture2D(F.R(),
r.COLOR_ATTACHMENT0,r.TEXTURE_2D,pa[C],0),I.g(!1,1===C);g[0]=-1}else B.Fa()},Aa:function(q){q!==p&&(r.activeTexture(m[q]),p=q)},b:function(q){if(!S)return!1;B.Aa(q);if(g[q]===T)return!1;b(ea);g[q]=T;return!0},cb:function(q){r.activeTexture(m[q]);p=q;b(ea);g[q]=T},j:function(){r.framebufferTexture2D(F.R(),r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ea,0)},u:function(){r.viewport(0,0,M,x);r.framebufferTexture2D(F.R(),r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ea,0)},le:function(){r.framebufferTexture2D(F.R(),r.COLOR_ATTACHMENT0,
r.TEXTURE_2D,null,0)},resize:function(q,C){M=q;x=C;A()},clone:function(q){q=W.a({width:M,height:x,B:c.B,isFloat:c.isFloat,isLinear:c.isLinear,M:c.M,isFlipY:q?!ra:ra,isPot:c.isPot});Ha.set("s0");F.H();q.j();r.viewport(0,0,M,x);B.b(0);I.g(!0,!0);return q},jd:function(){r.viewport(0,0,M,x)},remove:function(){r.deleteTexture(ea);B=null},refresh:function(){B.cb(0);ra&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);O?r.texImage2D(r.TEXTURE_2D,0,fa,la,r.UNSIGNED_BYTE,c.v):r.texImage2D(r.TEXTURE_2D,0,fa,M,x,0,la,
ma,U);ra&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1)},gb:function(){var q=M*x*4;ua=[new Uint8Array(q),new Uint8Array(q),new Uint8Array(q),new Uint8Array(q)];ia=[new Float32Array(ua[0].buffer),new Float32Array(ua[1].buffer),new Float32Array(ua[2].buffer),new Float32Array(ua[3].buffer)];Ca=new Uint8Array(4*q);Aa=new Float32Array(Ca.buffer);Q=!0},Qa:function(){Q||B.gb();r.readPixels(0,0,M,4*x,r.RGBA,r.UNSIGNED_BYTE,Ca);var q,C=M*x,G=2*C,R=3*C;for(q=0;q<C;++q)ia[0][q]=Aa[q],ia[1][q]=Aa[q+C],ia[2][q]=Aa[q+
G],ia[3][q]=Aa[q+R];return ia},Da:function(){F.D();v.set("s12");B.b(0);for(var q=0;4>q;++q)r.viewport(0,x*q,M,x),v.Lb("u8",w[q]),I.g(!1,0===q)},me:function(q){var C=ma===u[0]&&!k();b(ea);ra&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,ra);C?(ca||(X=document.createElement("canvas"),X.width=M,X.height=x,aa=X.getContext("2d"),sa=aa.createImageData(M,x),ca=!0),sa.data.set(q),aa.putImageData(sa,0,0),r.texImage2D(r.TEXTURE_2D,0,fa,la,ma,X)):r.texImage2D(r.TEXTURE_2D,0,fa,M,x,0,la,ma,q);g[p]=T;ra&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,
!1)},oe:function(q,C){b(ea);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,C);r.texImage2D(r.TEXTURE_2D,0,fa,la,ma,q);g[p]=T;C&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1)},be:function(q,C){var G=M*x,R=4*G;q=c.B?q?"RGBE":"JSON":"RGBA";C&&(q=C);C=Ja.m()&&!1;switch(q){case "RGBE":var Z="s41";break;case "JSON":Z=C?"s0":"s12";break;case "RGBA":case "RGBAARRAY":Z="s6"}Q||("RGBA"===q||"RGBE"===q||"RGBAARRAY"===q?(ua=new Uint8Array(R),Q=!0):"JSON"!==q||C||B.gb());F.D();v.set(Z);B.b(0);if("RGBA"===q||"RGBE"===q||"RGBAARRAY"===
q){r.viewport(0,0,M,x);I.g(!0,!0);r.readPixels(0,0,M,x,r.RGBA,r.UNSIGNED_BYTE,ua);if("RGBAARRAY"===q)return{data:ua};L||(P=document.createElement("canvas"),N=P.getContext("2d"),L=!0);P.width=M;P.height=x;f=N.createImageData(M,x);f.data.set(ua);N.putImageData(f,0,0);var ha=P.toDataURL("image/png")}else if("JSON"===q)if(C)ha=new Float32Array(G),r.viewport(0,0,M,x),I.g(!0,!0),r.readPixels(0,0,M,x,r.RGBA,r.FLOAT,ha);else{for(ha=0;4>ha;++ha)r.viewport(0,x*ha,M,x),v.Lb("u8",w[ha]),I.g(!ha,!ha);B.Qa();ha=
Array(G);for(Z=0;Z<G;++Z)ha[4*Z]=ia[0][Z],ha[4*Z+1]=ia[1][Z],ha[4*Z+2]=ia[2][Z],ha[4*Z+3]=ia[3][Z]}return{format:q,data:ha,width:M,height:x,isMirrorY:c.M,isFlipY:"RGBA"===q?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!xa&&S&&!Y&&(B.Fa(),Y=!0);if(c.url)b(ea),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,null),oa=new Image,oa.xd="Anonymous",oa.crossOrigin="Anonymous",oa.src=c.url,oa.onload=function(){M=oa.width;x=oa.height;A()};else if(c.v){var ja=function(){M=void 0!==c.v.videoWidth?c.v.videoWidth:
c.v.width;x=void 0!==c.v.videoHeight?c.v.videoHeight:c.v.height;M?A():setTimeout(ja,1)};ja()}else c.array?(c.B&&!c.isFloat?c.array instanceof Uint16Array?(U=c.array,A()):h()?(U=e(c.array),A()):(A(),W.tc(B,c.array,ra)):(U=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),A()),c.isKeepArray||(U&&U!==c.array&&(U=null),delete c.array)):A();B.Cc=B.o;ba&&S&&(ba(B),ba=!1);return B},D:function(c){c!==p&&(r.activeTexture(m[c]),
p=c);g[c]=-1;b(null)},td:function(c){t.random.b(c)},reset:function(){for(var c=0;c<m.length;++c)g[c]=-1;p=-1},ae:function(){p=-1},je:function(){for(var c=0;c<m.length;++c)W.D(c)},uc:function(){t&&(t.random.remove(),t.Pb.remove())},ke:function(c,A){if("RGBA"===c.format||"RGBE"===c.format){var J=new Image;J.src=c.data;J.onload=function(){W.a({M:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,v:J,Ca:function(O){if("RGBA"===c.format)A(O);else{var X=c.width,aa=c.height,ca=W.a({M:c.isMirrorY,isFloat:!0,width:X,
height:aa,isFlipY:c.isFlipY});F.H();r.viewport(0,0,X,aa);v.set("s42");ca.j();O.b(0);I.g(!0,!0);W.D(0);A(ca);r.flush();setTimeout(O.remove,50)}}})}}else"JSON"===c.format?A(W.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):A(!1)}};return W}(),La={a:function(b){var d=[K.a(b),K.a(b)],e=[d[1],d[0]],h=e,k={Jb:function(l){h[1].j();h[0].b(l);k.Ob()},ce:function(l){h[1].u();h[0].b(l);k.Ob()},Ob:function(){h=h===d?e:d},refresh:function(){h[0].refresh();h[1].refresh()},
b:function(l){h[0].b(l)},xc:function(){return h[0]}};return k}},Ja=function(){function b(){d="undefined"===typeof Ka?JEContext:Ka;e=!0}var d,e=!1,h=!1,k=!1,l=!1,p=!1,m=!1,n=!1,g=!1,t=!1,u=!1,z=!1,H=!0,D=!0,L=!0,P=!1,N="undefined"===typeof window?{}:window,f={i:function(){if(e)return!0;b();f.ib();f.Ea();f.pc();f.qc();F.i();K.i();if(!f.kc())return!1;I.i();K.Fc();return!0},o:function(){e||b();return d.o()},F:function(){e||b();return d.F()},m:function(){e||b();return d.m()},pc:function(){z=(u=r.getExtension("EXT_color_buffer_float")||
r.getExtension("WEBGL_color_buffer_float")||r.getExtension("OES_color_buffer_float"))?!0:!1;N.GL_EXT_COLORBUFFERFLOAT=u},qc:function(){r.getExtension("EXT_color_buffer_half_float")||r.getExtension("WEBGL_color_buffer_half_float")||r.getExtension("OES_color_buffer_half_float")},ib:function(){if(!h){this.m()||(k=r.getExtension("OES_texture_float")||r.getExtension("MOZ_OES_texture_float")||r.getExtension("WEBKIT_OES_texture_float"),p=(N.GL_EXT_FLOAT=k)?!0:!1);if(p||this.m())l=r.getExtension("OES_texture_float_linear")||
r.getExtension("MOZ_OES_texture_float_linear")||r.getExtension("WEBKIT_OES_texture_float_linear"),N.GL_EXT_FLOATLINEAR=l;h=!0}},Ea:function(){if(!t){if(!this.m()){if(m=r.getExtension("OES_texture_half_float")||r.getExtension("MOZ_OES_texture_half_float")||r.getExtension("WEBKIT_OES_texture_half_float"))P=m.HALF_FLOAT_OES,n=!0;!P&&r.HALF_FLOAT&&(P=r.HALF_FLOAT);!P&&r.FLOAT&&(P=r.FLOAT);N.GL_EXT_HALFFLOAT=m}if(n||this.m())g=r.getExtension("OES_texture_half_float_linear")||r.getExtension("MOZ_OES_texture_half_float_linear")||
r.getExtension("WEBKIT_OES_texture_half_float_linear"),N.GL_EXT_HALFFLOATLINEAR=g;t=!0}},la:function(){if(f.m())return r.HALF_FLOAT;f.Ea();return n?P:r.FLOAT},fb:function(){return H},dc:function(){return D},ud:function(){return L},cc:function(){return z},mc:function(){D=H=!0;var w=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,w);var y=r.createTexture();r.bindTexture(r.TEXTURE_2D,y);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,
r.NEAREST);r.texImage2D(r.TEXTURE_2D,0,f.m()&&r.RGBA32F?r.RGBA32F:r.RGBA,1,1,0,r.RGBA,r.FLOAT,null);r.framebufferTexture2D(F.R(),r.COLOR_ATTACHMENT0,r.TEXTURE_2D,y,0);var da=r.checkFramebufferStatus(F.Ga());da!==r.FRAMEBUFFER_COMPLETE&&(H=!1);r.texImage2D(r.TEXTURE_2D,0,f.m()&&r.RGBA16F?r.RGBA16F:r.RGBA,1,1,0,r.RGBA,f.la(),null);r.framebufferTexture2D(F.R(),r.COLOR_ATTACHMENT0,r.TEXTURE_2D,y,0);da=r.checkFramebufferStatus(F.Ga());da!==r.FRAMEBUFFER_COMPLETE&&(D=!1);r.bindTexture(r.TEXTURE_2D,null);
r.bindFramebuffer(r.FRAMEBUFFER,null);r.deleteTexture(y);r.deleteFramebuffer(w)},lc:function(){var w=F.a({width:1});w.Ib();var y=K.a({width:1,isFloat:!0,aa:3});w.j();y.j();r.flush();r.checkFramebufferStatus(F.Ga())!==r.FRAMEBUFFER_COMPLETE?(K.dd(),L=!1):L=!0;w.remove();y.remove()},kc:function(){f.mc();if(!H&&!D)return!1;f.lc();return!0}};return f}(),Ia=function(){function b(D,L,P,N){r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,N?r.NEAREST_MIPMAP_NEAREST:r.LINEAR);try{var f=r.getError();f!==r.NO_ERROR&&
console.log("GLERR in test_mipmapping() :",f);r.texImage2D(r.TEXTURE_2D,0,D,2,2,0,r.RGBA,L,P);f=r.getError();if(f!==r.NO_ERROR)return!1}catch(w){return!1}N&&r.generateMipmap(r.TEXTURE_2D);I.Ba();I.g(!1,!0);r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,m);f=r.getError();f===r.INVALID_OPERATION&&"undefined"!==typeof r.PIXEL_PACK_BUFFER&&(r.bindBuffer(r.PIXEL_PACK_BUFFER,null),r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,m),f=r.getError());return f!==r.NO_ERROR?!1:0!==m[0]}function d(D){return Ja.fb()&&
b(u,r.FLOAT,new Float32Array(g),D)?(l=k.Xa,!0):!1}function e(D){return Ja.dc()?b(z,Ja.la(),new Uint16Array(g),D)||b(z,r.FLOAT,new Float32Array(g),D)?(l=k.wa,!0):!1:!1}var h=!1,k={Xa:3,wa:2,RGBA8:0},l=k.RGBA8,p,m=new Uint8Array(4),n=[.8,1,.8,1],g=n.concat(n,n,n),t=!0,u,z,H={i:function(){Ja.ib();Ja.Ea();z=u=r.RGBA;if(Ka.m()){var D=r.RGBA32F;D&&(u=D);(D=r.RGBA16F)&&(z=D)}I.i();F.reset();F.D();r.viewport(0,0,1,1);v.set("s0");h=!0;p=r.createTexture();r.activeTexture(r.TEXTURE0);r.bindTexture(r.TEXTURE_2D,
p);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);if(e(!0)||d(!0))return!0;t=!1;if(e(!1)||d(!1))return!0;if(Ka.m()){z=u=r.RGBA;if(e(!0)||d(!0))return!0;t=!1;if(e(!1)||d(!1))return!0}return!1},ec:function(){return t},Kd:function(){return l},Vd:function(){h||H.i();return l===k.Xa},Ic:function(){h||H.i();return l===k.wa}};return H}(),Ma={a:function(b){var d=K.a(b.alpha),e=K.a(b.beta);
return{oc:function(){d.b(1);e.b(2)}}}},Pa={a:function(b){var d=b.ld;d.index=b.index;d.N=b.N;d.parent=b.parent;switch(d.type){case "input":b=Na.a(d);break;default:b=Oa.a(d)}return b}},Na={a:function(b){"undefined"===typeof b.sift&&(b.sift=!1);"undefined"===typeof b.DWT&&(b.DWT=!1);"undefined"===typeof b.blur&&(b.blur=!1);"undefined"===typeof b.siftOutWidth&&(b.siftOutWidth=!1);"undefined"===typeof b.density&&(b.density=1);var d=!1;if(b.mask){d=!0;a&&void 0!==a.Yb&&(b.mask=a.Yb+b.mask);var e=K.a({isFloat:!1,
url:b.mask})}var h=!1,k="undefined"!==typeof b.preprocessing?b.preprocessing:!1,l=!1,p=!1;b.sift?Sift.i({Ec:r,ia:!1,width:b.size,$d:b.siftOutWidth}):b.DWT&&DWT.i({Ec:r,ia:!1,width:b.size});var m=!1;b.customInputShader&&(m="s43",v.Za({name:"_",id:m,c:b.customInputShader,f:["uSource"],precision:"lowp"}),v.C(m,[{type:"1i",name:"_",value:0}]));switch(k){case "sobel":var n="s32";l=!0;break;case "meanNormalization":n="s33";l=!0;break;case "grayScale":n="s29";l=!1;break;case "grayScaleTilt":n="s30";p=!0;
l=!1;break;case "rgbGrayTilt":n="s31";p=!0;l=!1;break;case "copy":n=m?m:"s0";break;case "inputLightRegulation":n=m?m:"s29";Qa.i({width:b.size,xb:b.nBlurPass,Hc:!1});h=!0;break;case "direct":case "none":n=!1;break;default:n="s3"}p&&v.C(n,[{name:"u28",type:"1f",value:b.tilt}]);d&&(n+="Mask");if(b.blur)var g=K.a({isFloat:!1,isPot:!1,width:b.size});var t=K.a({isFloat:!1,isPot:!1,width:b.size}),u={o:function(){return b.sift?Sift.$():b.size},$:function(){return u.o()},Ac:function(){return b.sift?Sift.ma():
b.DWT?DWT.ma():h?Qa.ma():t},w:function(){F.H();b.blur&&(g.u(),v.set("s44"),v.I("u7",1/b.size,1/b.size),I.g(!1,!0),g.b(0));n&&(v.set(n),l&&v.A("u29",1/b.size),t.u(),d&&e.b(1),I.g(!1,!1),t.b(0),h?Qa.Pa(t):b.sift?(v.U(),Sift.Pa()):b.DWT&&(v.U(),DWT.Pa(4)))}};return u}},Oa={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var d=[],e=[],h,k,l=!1,p,m=!0,n,g,t=b.isReorganize?b.isReorganize:!1,u=b.kernelsNumber?!0:!1,z=b.dynPelu?Ma.a(b.dynPelu):!1,H=z?!0:!1,D={isEnabled:!1},
L;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(b.num_classes))));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.N.$();b.gain="undefined"!==typeof b.gain?b.gain:1;v.C("s20",[{type:"1f",name:"u10",value:b.gain}]);var P=K.a({isFloat:!0,isPot:!1,width:b.size}),N=K.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});m=!1;var f=new Uint8Array(Math.pow(4*b.size,2)),w;for(w=0;w<b.size*b.size;++w){var y=w<b.num_classes?255:0;f[4*w]=y;f[4*w+1]=y;f[4*w+
2]=y;f[4*w+3]=y}var da=K.a({isFloat:!1,isPot:!1,width:b.size,array:f})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.N.$(),m=!1):"full"===b.connectivityUp&&(b.sparsity=b.N.$());var qa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],ta=b.sparsity*b.sparsity,na=!1,W=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var c="s34";break;case 4:c="s35"}na=!0;W/=b.maxPooling.size;var A=K.a({isFloat:!0,
isPot:!1,width:W})}var J=void 0!==b.Vc&&b.Vc?!0:!1,O=null,X=null,aa=null;J&&(O="s45"+b.index.toString(),v.ob("s45",O,[((b.normalization.n-1)/2).toFixed(1)]),v.C(O,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u33",value:b.normalization.k}]),X=K.a({isFloat:!0,isPot:!0,width:b.size}),aa=K.a({isFloat:!0,isPot:!0,width:b.size}));var ca,sa,ea,ba;m&&(ba=K.a({isFloat:!0,
isPot:!1,width:b.size}));var oa=K.a(b.bias),U,M={o:function(){return b.size},$:function(){return W},lb:function(){return b.num_classes},ac:function(x){L.b(x)},Yc:function(){b.remap&&b.remap.isEnabled&&(D={isEnabled:!0,Kc:K.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(x){return b.parent.yc(x)}),depth:b.remap.depth})},fd:function(){switch(b.connectivityUp){case "gaussian":U=Ra.a(b.connectivity);
break;case "direct":U=Sa.a(b.connectivity);break;case "square":U=Ta.a(b.connectivity);break;case "squareFast":U=Ua.a(b.connectivity,b.activation);break;case "full":U=Va.a(b.connectivity);break;case "conv":g=b.kernelsNumber,U=Wa.a(b.connectivity),t&&(n=K.a({width:W,isFloat:!0,isFlipY:!1,isPot:!1}))}if(U.O){var x=b.size*b.sparsity;sa=Math.log(x/b.size)/Math.log(2);ca=K.a({isMipmap:!0,isFloat:!0,isPot:!0,width:x,vb:sa});ea=K.a({isFloat:!0,isPot:!0,width:b.size})}},w:function(x,S){L=x;U.O?(ca.u(),u&&
oa.b(2),U.w(D),ca.b(0),ca.jb(sa),ea.u(),u?v.set("s0"):(v.set("s28"),v.A("u27",ta),oa.b(1)),ca.eb(sa,0),I.g(!1,!1),v.set(qa),J?X.j():ba.j(),ea.b(0),H&&z.oc(),I.g(!1,!1)):(ba.u(),oa.b(1),U.w());J&&(v.set(O),aa.j(),X.b(0),I.g(!1,!1),v.set("s46"),v.A("u6",1),ba.j(),aa.b(1),I.g(!1,!1));if(m)return na?(A.u(),ba.b(0),v.set(c),v.I("u7",1/b.size,1/b.size),I.g(!1,!1),S=A):S=ba,S.b(0),t&&(n.j(),v.set("s22"),v.I("u14",g,W/g),I.g(!1,!1),S=n,n.b(0)),S;if("softmax"===b.type){v.set("s20");ba.b(0);P.j();I.g(!1,!1);
b.disableNormalize?x=P:(v.set("s2"),P.b(0),da.b(1),N.j(),I.g(!1,!1),v.set("s0"),k.u(),N.b(0),N.jb(!1),I.g(!1,!1),v.set("s21"),h.u(),N.eb(!1,0),v.A("u12",ba.Cc()),k.b(1),I.g(!1,!1),x=h);if(S){switch(l){case "cpuRGBAAvg":break;default:var T=M.Cb(x)}return T}return!1}if(b.cost){v.set("gpuRawAvg"===l?"s8":"s7");S=ba;b.disableNormalize||(v.A("u4",1/b.size),h.u(),ba.b(0),I.g(!1,!1),S=h);switch(l){case "cpuRGBA2Float":S.Da();T=M.Cb(S);p(T);break;case "gpuRawAvg":case "gpuRaw":S.b(0),p(S)}return!1}},hc:function(x){x&&
"undefined"!==typeof x.Bb&&(l=x.Bb,p=x.Xc);ba=K.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(k=K.a({isFloat:!0,isPot:!0,width:1}));var S=0,T=0,Q="undefined"!==typeof b.num_classes&&b.num_classes?b.num_classes:b.size*b.size;for(x=0;x<Q;++x)d.push(S+(b.size-1-T)*b.size),e.push([-1,-1,-1,-1]),++S,S===b.size&&(S=0,++T);b.disableNormalize||(h=K.a({isFloat:!0,isPot:!0,width:b.size}))},Cb:function(x){x.Da();var S=x.Qa();d.forEach(function(T,Q){e[Q][0]=S[0][T];e[Q][1]=
S[1][T];e[Q][2]=S[2][T];e[Q][3]=S[3][T]});return e}};b.N&&M.fd(b.N);return M}};
function Xa(){var b={},d,e,h;b||(b={});this.yc=function(k){return d[k]};this.cd=function(k){var l=!1;d=k.map(function(p,m){return l=p=Pa.a({index:m,parent:this,ld:p,N:l})});e=d[0];h=d[d.length-1];d.forEach(function(p,m){0!==m&&p.Yc()})};this.w=function(k,l){var p=l;d.forEach(function(m){p=m.w(p,k)});return p};this.wc=function(){return e.o()};this.Bc=function(){return h.o()};this.ma=function(){return h.Ac()};this.ed=function(k){h.hc(k)};this.lb=function(){return h.lb()}}
var Sa={a:function(b){var d=K.a(b.weights);delete b.weights.data;return{O:!0,Z:function(){return 1},Dc:function(){return d},w:function(){v.set("s27");d.b(1);I.g(!1,!1)}}}},Va={a:function(b){var d=b.fromLayerSize,e=K.a(b.weights);return{O:!0,Z:function(){return d},w:function(h){if(h.isEnabled){v.set("s25");h.Kc.b(3);var k,l=Math.min(h.layers.length,h.depth);for(k=0;k<l;++k)h.layers[k].ac(4+k)}else v.set("s24");v.A("u18",b.toLayerSize);e.b(1);I.g(!1,!1)}}}},Ra={a:function(b){var d=b.toSparsity*b.toLayerSize,
e=d/b.fromLayerSize,h=K.a(b.weights);K.a({width:d,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var k=K.a({width:d,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{O:!0,Z:function(){return e},w:function(){v.set("s23");h.b(1);k.b(2);I.g(!1,!0)}}}},Ta={a:function(b){var d=b.fromLayerSize,e=b.toLayerSize,h=b.toSparsity,k=h*e,l=k/d,p=d/e,m,n,g,t,u=0,z=0,H=0,D=Array(h*e*h*e*4),L=Array(h*e*h*e*4),P=Array(d*d);for(m=0;m<P.length;++m)P[m]=0;var N=Math.floor(h/2),f=.5/e,w=.5/
d,y=.5/k;for(m=0;m<e;++m)for(n=0;n<e;++n){var da=Math.round(m*p);var qa=Math.round(n*p);var ta=m/e;var na=n/e;ta+=f;na+=f;for(g=0;g<h;++g)for(t=0;t<h;++t){var W=u/k;var c=z/k;var A=da+g-N;var J=qa+t-N;0>A&&(A+=d);0>J&&(J+=d);A>=d&&(A-=d);J>=d&&(J-=d);var O=A/d;var X=J/d;c=1-c-1/k;O+=w;X+=w;W+=y;c+=y;var aa=m*h+g,ca=n*h+t;ca=e*h-ca-1;aa=ca*e*h+aa;D[4*aa]=W;D[4*aa+1]=c;D[4*aa+2]=O;D[4*aa+3]=X;O=P[J*d+A]++;X=O%l;A=A*l+X;J=J*l+(O-X)/l;J=d*l-1-J;J=J*d*l+A;L[4*J]=W;L[4*J+1]=c;L[4*J+2]=ta;L[4*J+3]=na;++u>=
k&&(u=0,++z);++H}}var sa=K.a(b.weights);K.a({width:k,isFloat:!0,array:new Float32Array(L),isPot:!0});L=null;var ea=K.a({width:k,isFloat:!0,array:new Float32Array(D),isPot:!0});D=null;return{O:!0,Z:function(){return l},w:function(){v.set("s23");sa.b(1);ea.b(2);I.g(!1,!1)}}}},Wa={a:function(b){var d=b.kernelsNumber,e=b.toSparsity,h=e*b.toLayerSize/b.fromLayerSize,k=K.a(b.weights);return{O:!0,Z:function(){return h},Od:function(){return e},Dc:function(){return k},w:function(){v.set("s26");v.A("u24",d);
v.A("u25",e);v.A("u18",b.toLayerSize);v.A("u26",b.fromLayerSize);k.b(1);I.g(!1,!1)}}}},Ua={a:function(b,d){var e=b.fromLayerSize,h=b.toLayerSize,k=b.toSparsity,l=b.stride?b.stride:1,p=k*h/e,m=h<e,n=e/h,g=K.a(b.weights),t="s47"+[e.toString(),h.toString(),k.toString(),l.toString(),d].join("_");v.rc(t)||(b=Da(d),h=[{type:"1f",name:"u18",value:h},{type:"1f",name:"u32",value:l}],m&&h.push({type:"1f",name:"u26",value:e}),e=[(m?p:k).toFixed(1),b],m&&e.push(n.toFixed(1)),v.ob(m?"s40":"s39",t,e),v.C(t,h.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{O:!1,Z:function(){return p},w:function(){v.set(t);g.b(3);I.g(!1,!1)}}}},Qa=function(){var b,d,e,h,k,l,p,m,n;return{i:function(g){b=g.xb?g.xb:3;d=g.width?g.width:64;h=g.Hc?!0:!1;g={isFloat:!1,width:d,isPot:!1,isFlipY:!1};k=K.a(g);l=K.a(g);p=K.a(g);m=K.a(g);n=K.a({isFloat:!0,width:d,isPot:!1,isFlipY:!1});e=1/d},Pa:function(g){v.set("s37");for(var t=0;t<b;++t)k.j(),v.I("u7",e,0),I.g(h,!1),l.j(),k.b(0),v.I("u7",
0,e),I.g(h,!1),l.b(0);v.set("s36");m.j();g.b(0);I.g(h);v.set("s37");for(t=0;t<b;++t)p.j(),m.b(0),v.I("u7",e,0),I.g(h,!1),m.j(),p.b(0),v.I("u7",0,e),I.g(h,!1);v.set("s38");n.j();g.b(0);l.b(1);m.b(2);I.g(h,!1);n.b(0)},ma:function(){return n}}}();function Ya(b,d){b[d]=!0;b.setAttribute(d,"true")}function Za(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function $a(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}function ab(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function bb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function cb(b){if(!b)return b;var d=!1;if(b.video){var e=function(h){var k={};"undefined"!==typeof h.min&&(k.min=h.min);"undefined"!==typeof h.max&&(k.max=h.max);"undefined"!==typeof h.ideal&&(k.ideal=h.ideal);return k};d={};"undefined"!==typeof b.video.width&&(d.width=e(b.video.width));"undefined"!==typeof b.video.height&&(d.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=b.video.facingMode)}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&(d.deviceId=b.deviceId);
return d}function db(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function eb(b){function d(u){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(z,H){return Math.abs(z-u)-Math.abs(H-u)})}function e(u){var z=cb(b);h.push(u(z))}var h=[];if(!b||!b.video)return h;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var k=d(b.video.width.ideal).slice(0,3),l=d(b.video.height.ideal).slice(0,3),p={},m=0;for(p.K=void 0;m<k.length;p={K:p.K},++m){p.K=k[m];var n={},g=0;for(n.J=void 0;g<l.length;n={J:n.J},++g)if(n.J=l[g],
p.K!==b.video.width.ideal||n.J!==b.video.height.ideal){var t=Math.max(p.K,n.J)/Math.min(p.K,n.J);t<4/3-.1||t>16/9+.1||e(function(u,z){return function(H){H.video.width.ideal=u.K;H.video.height.ideal=z.J;return H}}(p,n))}}}e(function(u){return db(u)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(u){delete u.video.width.ideal;delete u.video.height.ideal;return u}),e(function(u){delete u.video.width;delete u.video.height;return u}));b.video.facingMode&&(e(function(u){delete u.video.facingMode;
return u}),b.video.width&&b.video.height&&e(function(u){db(u);delete u.video.facingMode;return u}));h.push({audio:b.audio,video:!0});return h}function fb(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(h){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var e=b.video.height;d&&e&&d.ideal&&e.ideal&&d.ideal>e.ideal&&(b.video.height=d,b.video.width=e)}}
function gb(b){b.volume=0;Ya(b,"muted");if(ab()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;Ya(b,"muted")},5)}}
function hb(b,d,e,h){function k(p){l||(l=!0,e(p))}var l=!1;navigator.mediaDevices.getUserMedia(h).then(function(p){function m(){setTimeout(function(){if(b.currentTime){var n=b.videoWidth,g=b.videoHeight;if(0===n||0===g)k("VIDEO_NULLSIZE");else{n&&(b.style.width=n.toString()+"px");g&&(b.style.height=g.toString()+"px");n={fc:null,kd:null,Nc:null};try{var t=p.getVideoTracks()[0];t&&(n.Nc=t,n.fc=t.getCapabilities(),n.kd=t.getSettings())}catch(u){}ab()||Za()?b.parentNode&&null!==b.parentNode?(l||d(b,p,
n),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),gb(b),l||d(b,p,n),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";gb(b);setTimeout(function(){b.play()},100)},80)):l||d(b,p,n)}}else k("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=p:(b.src=window.URL.createObjectURL(p),b.videoStream=p);gb(b);b.addEventListener("loadeddata",function(){var n=b.play();gb(b);"undefined"===typeof n?
m():n.then(function(){m()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(p){k(p)})}
function ib(b,d,e){var h=bb()?document.createElement("video"):!1;if(h)if(bb()){if(e&&e.video){if(Za()){var k=$a();(12>k[0]||12===k[0]&&2>k[1])&&fb(e)}e.video.width&&e.video.width.ideal&&(h.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(h.style.height=e.video.height.ideal+"px")}Ya(h,"autoplay");Ya(h,"playsinline");e&&e.audio?h.volume=0:Ya(h,"muted");hb(h,b,function(){function l(m){if(0===m.length)d("INVALID_FALLBACKCONSTRAINTS");else{var n=m.shift();hb(h,b,function(){l(m)},
n)}}var p=eb(e);l(p)},e)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}
var jb=function(){var b=0,d,e,h,k;return{i:function(l,p){b=l.length;d=p;e=l;h=new Float32Array(b);k=new Float32Array(b)},zc:function(){return k},md:function(l,p,m){l.forEach(function(n,g){var t=Math.min(1,e[g]*m*(p+.33*(1-p)));n=t*n+(1-t)*h[g];h[g]=n;k[g]=d[g](n)})}}}(),V={V:[],ya:!1,za:!1,xa:!1,Ya:!1,ea:!0,da:!1,ready:!1,initialized:!1},kb={facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},a={save:"jeelizFaceTransferNNC.json",
Va:"../../",Wb:0,width:512,height:512,Oc:.25,Lc:.7,Sc:3,borderWidth:.4,Y:.35,Tc:5,Uc:3,Ta:[.06,.08,.15],nd:55,Pc:.6,Mc:5.8,Sb:.75,Rb:1,$a:[.03,1],qd:20,ga_:.2,P:[30,55],Wa:3,Zb:1/3.5,Ab:11,wb:1,Qc:1,ab:[.1,.01],$c:[.4,-.7,-.4],ad:[.3,0,0],Hb:[5,7],nc:!1,T:[0,7],Xb:.001,bb:[Math.PI/10,Math.PI/6],Db:[0,6],Eb:[.1,.4],Fb:[.009,.02],Gb:[.02,.04],Na:8,nb:[3,7],mb:.05,Vb:[.2,.2,.15,.15,.15,.15,.2,.2,.15,.15,.2],Rc:[ya.bind(null,.05,.7),ya.bind(null,.05,.7),ya.bind(null,0,.4),ya.bind(null,0,.4),ya.bind(null,
0,.6),ya.bind(null,0,.6),za.bind(null,.1,.6),ya.bind(null,.1,.4),Ba.bind(null,.68,.77,2),Ba.bind(null,.68,.77,2),ya.bind(null,.15,.5)]};V.get_nMorphs=function(){return a.Ab};var lb=!1,mb=!1;
function nb(){var b,d,e,h,k,l,p,m,n,g,t;function u(){1===++M&&(jb.i(a.Vb,a.Rc),z(),V.ready=!0,V.V.forEach(function(E){E()}),V.V.splice(0,V.V.length),H(),M=0)}function z(){O=wa();X=new Uint8Array(ta*ta*4);V.get_morphTargetInfluences=function(){return O};V.get_morphTargetInfluencesStabilized=function(){return jb.zc()};V.set_morphUpdateCallback=function(E){aa=E};V.get_rotation=function(){return sa};V.get_positionScale=function(){var E=A.Nb.xc();E.Da();E=E.Qa();oa[0]=1-E[1][0];oa[1]=E[2][0];oa[2]=E[3][0]*
na[0];return oa};V.get_rotationStabilized=function(){return ba};V.switch_sleep=function(E){S!==x.ta||E?S=E?x.ta:x.ja:H()};V.on_detect=function(E){E(T.G);T.Oa.push(E)};V.is_detected=function(){return T.G};V.set_animateDelay=function(E){w=E}}function H(){S!==x.ja&&(S=x.ja,Q.timestamp=Date.now(),y&&window.clearTimeout(y),da&&window.cancelAnimationFrame(da),L())}function D(){S!==x.ta&&(y=setTimeout(L,w))}function L(){a:{if("VIDEO"===U.element.nodeName){var E=U.element.currentTime-xa;0>E&&(xa=U.element.currentTime);
if(1E3*E<a.qd)break a;xa+=E}U.ba.refresh();v.set("s49");F.H();A.Ja.u();U.ba.b(0);I.g(!1,!0)}E=S===x.ja?Q.qa:1;for(var Y=0;Y<E;++Y){var B=A,ja=qa;v.set("s50");F.H();B.na.u();B.Ja.b(0);B.ua.b(1);I.g(!1,!1);B.na.b(0);ja.w(!1,B.na)}V.ea&&(F.od(),v.set("s5"),A.Ja.b(0),I.g(!1,!1),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE),J.b(0),I.g(!1,!1),r.disable(r.BLEND));r.flush();Y=Date.now();B=Y-Q.timestamp;Q.timestamp=Y;Q.yb=E/B;Q.Ma=Q.yb*a.ga_+Q.Ma*(1-a.ga_);Q.zb=1E3/B;Q.S=Q.zb*a.ga_+Q.S*(1-a.ga_);Q.S>a.P[1]?
(++Q.qa,Q.S=(a.P[0]+a.P[1])/2):Q.S<a.P[0]&&(Q.qa=Math.max(Q.qa-1,a.Wa),Q.S=(a.P[0]+a.P[1])/2);Q.ha=a.Zb/Math.max(Q.Ma,.001);S!==x.ta&&(da=window.requestAnimationFrame(D))}var P,N,f=64,w=a.Wb,y=!1,da=!1,qa,ta,na,W,c,A={},J,O=!1,X,aa=!1,ca=[0,0,0],sa=[0,0,0],ea=[0,0,0],ba=[0,0,0],oa=[0,0,0],U={element:null,ba:null},M=0,x={Jc:-2,ta:-1,ja:0},S=x.Jc,T={pa:0,G:!1,Oa:[]},Q={timestamp:0,yb:0,Ma:0,qa:a.Wa,zb:0,S:0,ha:1},ia=1,ua=1,Ca=1,Aa=1,fa=[0,0,0],la=Date.now(),ma=new Float32Array(a.Na),ra=0,xa=0,pa={pb:function(){P=
a.width;N=a.height;W=a.Oc;c=a.Lc;var E=P/f;W*=E;c*=E;k=(1-2*a.borderWidth)/a.Tc;l=(1-2*a.Y)/a.Uc;p=(c-W)/a.Sc;m=a.borderWidth;n=a.Y;g=1-a.borderWidth;t=1-a.Y;b=0;d=a.borderWidth;e=a.Y;h=W;na=[f/P,f/N]},Mb:function(){v.C("s50",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u34",value:1},{type:"2f",name:"u35",value:na}]);v.C("s51",[{type:"1i",name:"u34",value:0},{type:"2f",name:"u35",value:na},{type:"3f",name:"u36",value:[0,.5,1]}]);v.C("s52",[{type:"1i",name:"u37",value:0},{type:"1i",name:"u34",value:1},
{type:"1f",name:"u38",value:a.Pc},{type:"1f",name:"u39",value:a.Mc},{type:"1f",name:"u40",value:a.nd},{type:"1f",name:"u41",value:a.Sb},{type:"1f",name:"u42",value:a.Rb},{type:"1f",name:"u43",value:na[0]}]);v.C("s53",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u5",value:1},{type:"1f",name:"u44",value:a.$a[0]},{type:"1f",name:"u45",value:a.$a[1]}])},ic:function(){v.Ub([{id:"s49",name:"_",ca:"attribute vec2 a0;uniform vec2 u46,u47;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u47+u46*a0;}",
fa:["a0"],W:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u46","u47"],precision:"lowp"},{id:"s50",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ca:"attribute vec2 a0;uniform sampler2D u34;uniform vec2 u35;const vec2 f=vec2(.25,.5),h=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u34,f);vec2 b=a.gb,c=a.a*u35,d=a0*.5+e;vv0=b+(d-e)*c,gl_Position=vec4(a0,0.,1.);}",fa:["a0"],
W:[2],f:["u1","u34","u35"],precision:"lowp"},{id:"s52",name:"_",ca:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u37,u34;uniform vec3 u48,u49;uniform float u38,u39,u40,u41,u42,u43,u50;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u37,vec2(.4375,.9375)),h=texture2D(u37,vec2(.5625,.9375)),a=texture2D(u34,vec2(.5,.5));float c=dot(g,e),i=dot(h,e);bool d=c>u41&&c>i+u42;d?a.r=2.:a.r>u40?a.r=0.:a.r>1.9&&(a.a>u39||a.a<u38)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u48,a.r=1.;else{float j=dot(e,texture2D(u37,vec2(.0625,.9375))),k=dot(e,texture2D(u37,vec2(.1875,.9375))),l=dot(e,texture2D(u37,vec2(.3125,.9375))),b;if(a.r>1.9)b=1.-u50;else b=1.,a.r=0.;float f=a.a*u43;a.gba+=vec3(j,k,l)*u49*b*f;}gl_FragColor=a;}",
f:"u37 u34 u48 u38 u39 u40 u41 u42 u49 u43 u50".split(" ")},{id:"s51",name:"_",c:"uniform sampler2D u34;uniform vec3 u36;uniform vec2 u35;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 g=texture2D(u34,vec2(.25,.5));vec2 h=g.gb;float j=g.a;vec2 a=j*u35,c=h+a,d=h;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),f=step(d,vv0)*step(vv0,c);float l=f.x*f.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u36*max(b.x,b.y),1.);}",f:["u34","u35","u36"],precision:"lowp"},{id:"s53",name:"_",c:"uniform sampler2D u1,u5;uniform float u44,u45,u50;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u50)*(u45-u44)+u44;gl_FragColor=mix(b,a,c*f);}",
f:["u1","u5","u44","u45","u50"]}])},Gc:function(E){var Y=new Float32Array([0,a.borderWidth,a.Y,0]);E.Ja=K.a({isPot:!1,Zd:!0,isFloat:!1,width:P,height:N});E.na=K.a({isPot:!0,isFloat:!1,width:f});Y={width:1,height:1,isFloat:!0,isPot:!1,array:Y};E.ua=La.a(Y);E.Nb=La.a(Y)},jc:function(){U.ba=K.a({v:U.element,isPot:!1,isFloat:!1,isFlipY:!0});J=K.a({isPot:!1,isFloat:!1,width:P,height:N})},i:function(E){function Y(){var C=B(a.nb[0],a.nb[1]);T.pa=a.mb*C+(1-a.mb)*T.pa;.6<T.pa&&!T.G?(T.Oa.forEach(function(G){G(!0)}),
T.G=!0):.4>T.pa&&T.G&&(T.Oa.forEach(function(G){G(!1)}),T.G=!1)}function B(C,G){C+=ta*G;return(X[4*C]+X[4*C+1]+X[4*C+2]+X[4*C+3])/1020}function ja(){O.forEach(function(C,G){if(T.G){C=(a.wb+G)%ta;var R=a.Qc+Math.floor((a.wb+G)/ta);R=ta-1-R;C=B(C,R);O[G]=C}else O[G]=0})}function q(C){qa=new Xa;qa.cd(C.layers);qa.ed({Bb:"gpuRaw",Xc:function(G){var R=A;R.ua.Jb(1);r.viewport(0,0,1,1);v.set("s52");v.A("u50",ia);v.Kb("u48",d,e,h);v.Kb("u49",1*a.Ta[0],1*a.Ta[1],1*a.Ta[2]);I.g(!1,!1);1!==++b%2&&(h+=p,h>c&&
(d+=k,h=W,d>g&&(d=m,e+=l,e>t&&(e=n))));R.Nb.Jb(1);v.set("s53");v.A("u50",ia);R.ua.b(0);I.g(!1,!1);K.Zc(G,X);ja();if(!a.nc&&T.G)for(G=0;3>G;++G)R=B(G+a.Hb[0],a.Hb[1]),R=(2*R-1)*a.$c[G],R+=a.ad[G],ca[G]=R;Y();G=Date.now();R=G-la;var Z=B(a.Db[0],a.Db[1]);Ca=za(a.Eb[0],a.Eb[1],Z);Z=B(a.T[0],a.T[1]);var ha=B(a.T[0]+1,a.T[1]),Ea=B(a.T[0]+2,a.T[1]);ua=1-za(a.Gb[0],a.Gb[1],Math.sqrt(Z*Z+ha*ha+Ea*Ea)/R);Z=fa[0]-ca[0];ha=fa[1]-ca[1];Ea=fa[2]-ca[2];R=Math.sqrt(Z*Z+ha*ha+Ea*Ea)/R;fa[0]=ca[0];fa[1]=ca[1];fa[2]=
ca[2];Aa=1-za(a.Fb[0],a.Fb[1],R);ia=Ca*ua*Aa;la=G;ma[ra]=ia;ra=(ra+1)%a.Na;for(G=0;G<a.Na;++G)ia=Math.min(ma[G],ia);jb.md(O,ia,Q.ha);aa&&aa(ia,Q.ha);if(T.G)for(G=a.ab[1]*ia+a.ab[0]*(1-ia),G*=Q.ha,R=0;3>R;++R)sa[R]=G*ca[R]+(1-G)*sa[R],ba[R]=sa[R];else G=Date.now()*a.Xb,ea[0]=a.bb[0]*Math.sin(G),ea[1]=a.bb[1]*Math.cos(G),ba[0]=ea[0],ba[1]=ea[1],ba[2]=ea[2];G=A;F.H();J.u();v.set("s51");G.ua.b(0);I.g(!1,!1)}});C=qa.wc();C!==f&&(f=C,pa.pb(),A.na.resize(f,f),pa.Mb());ta=qa.Bc();u()}U.element=E;pa.ic();
pa.Mb();pa.jc();pa.Gc(A);mb?q(mb):ka(function(C){C=JSON.parse(C);q(C)})},gd:function(E,Y){for(var B in E)"undefined"!==typeof Y[B]&&(E[B]=Y[B])},gc:function(E){V.ya&&V.ya();var Y={video:{facingMode:{ideal:kb.facingMode},width:{min:kb.minWidth,max:kb.maxWidth,ideal:kb.idealWidth},height:{min:kb.minHeight,max:kb.maxHeight,ideal:kb.idealHeight}},audio:V.Ya};kb.deviceId&&(constraints.deviceId=kb.deviceId);ib(function(B,ja){lb=ja;V.za&&V.za();E(B)},function(){window.va&&window.va("WEBCAM_UNAVAILABLE")},
Y)},ub:function(E,Y){if("VIDEO"===E.nodeName){var B=E.videoWidth;var ja=E.videoHeight}else B=E.width,ja=E.height;Ka.ka().width=B;Ka.ka().height=ja;a.width=B;a.height=ja;pa.pb();var q=[.5,.5];ja/=B;B=Ka.F()/Ka.o();ja>B?1>=ja?q[0]*=ja:q[1]/=ja:(q[0]*=ja,ja=1/B,q[0]*=ja,q[1]*=ja);q[1]*=B;pa.i(E);v.C("s49",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u46",value:q},{type:"2f",name:"u47",value:[.5,.5]}]);Y&&Y()}};return pa}V.onLoad=function(b){V.ready?b():V.V.push(b)};V.set_audio=function(b){V.Ya=b};
V.switch_displayVideo=function(b){V.ea=b;V.da&&(V.da.style.display=V.ea?"block":"none")};V.onWebcamAsk=function(b){V.ya=b};V.onContextLost=function(b){V.xa=b};V.onWebcamGet=function(b){V.za=b};V.set_size=function(b,d){a.width=b;a.height=d};V.get_size=function(){return{width:a.width,height:a.height}};V.get_videoStream=function(){return lb};V.get_cv=function(){return Ka.ka()};V.set_color=function(b){v.C("s51",[{type:"3f",name:"u36",value:b}])};
V.init=function(b){var d=nb(),e=b.callbackReady?b.callbackReady:function(k){console.log("ERR:",k)},h=b.callbackReady?b.callbackReady.bind(!1):!1;if("undefined"===typeof b.canvasId)e("NO_CANVASID");else if(document.getElementById(b.canvasId))if(V.initialized)e("ALREADY_INITIALIZED");else{V.initialized=!0;window.va=e?function(k){e(k);window.va=!1}:!1;b.NNCpath&&(a.Va=b.NNCpath);"undefined"!==typeof b.NNC&&(mb="string"===typeof b.NNC?JSON.parse(b.NNC):b.NNC);h&&V.V.push(h);if(!Ka.i({hb:b.canvasId,width:a.width,
height:a.height,debug:!1,Ka:!1,Wc:function(){V.xa&&V.xa()},premultipliedAlpha:!1}))return e("GL_INCOMPATIBLE"),!1;V.da=Ka.ka();V.ea||(V.da.style.display="none");I.i();F.i();v.i();K.i();r.depthFunc(r.LEQUAL);r.clearDepth(1);b.videoSettings&&b.videoSettings.videoElement?d.ub(b.videoSettings.videoElement,!1):(b.videoSettings&&d.gd(kb,b.videoSettings),d.gc(function(k){d.ub(k,!1)}));return!0}else e("INVALID_CANVASID")};window.JEEFACETRANSFERAPI=V;
;return JEEFACETRANSFERAPI;})();